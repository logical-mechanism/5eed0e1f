use clap::Args;
use seedelf_cli::web_server;

/// Struct to hold command-specific arguments
#[derive(Args)]
pub struct LabelArgs {
    #[arg(long, help = "The payee address.")]
    address: String,

    #[arg(long, help = "The seedelf label / personal tag.")]
    label: String,
}

pub async fn run(args: LabelArgs, network_flag: bool) {
    if network_flag {
        println!("Running in preprod environment");
    }

    println!("Address: {}", args.address);
    println!("Label: {}", args.label);

    // we use pallas here to create valid cbor for creating a new seedelf
    let message = "84a300d901028182582046d48857d704091e19f28818363e5b44bffac53379aa703811d88bc3c027631900018282581d60bd1527aa6aa867bc10aceff2c21fe84cab55da0225e4a3701f0f33d71a0288120ea300581d708e511d37053024c30870a6c7e59d9947bec0d25d42ec4e953e302fa1011a003770b203d81859027e820359027959027601010033232323232323232225333003323232323253330083370e900118049baa001132332253323300c3001300d375400c2646464646464a66602a60300042a666024600e60266ea80204c8c94cccccc06c00854ccc050c024c054dd5001099299980c000801099299999980e80080180180180189919299980d8008028992999999810000803003003003099299980e9810001899299980d9919199999911111192999812180c98129baa001132325333026301b30273754002266ee4008cddb1bbb005337706eb4c0acc0a0dd50009bbb007163008379066e28cdc519b8a007004006003337706eb4c0a4c098dd50009bbb006163006003232533301f533301f337129000000899b880014820a02020383ffffffffef7f97fefe0693ef3aaa02efa21222c39e660ea77f3aa69a77b6f838528099ba548000cc08cdd4000a5eb805300103d87a800033794944004dd71800980f9baa00b375c6004603e6ea802cdd71800980f9baa017375c6004603e6ea805cdd71801980f9baa0172302200123021302200113322323300100100322533302200114a026644a66604266e3c0080145288998020020009bae302400130250013758604060426042604260426042604260426042603a6ea8058dd71800980e9baa01514a0460406042604200200e6eb8004c074004c07400cdd7000980d000980b1baa00200100100100100114a2602e60286ea80205288b1bae30160013016002375c602800260280046eb8c048004c038dd50031b874800058c038004c038c03c004c028dd50008b1806180680198058011805001180500098029baa00114984d9595cd2ab9d5573caae7d5d02ba15744ae9130010948acabbeeffacecafe0001021a00038b19a0f5f6".to_string();
    web_server::run_web_server(message).await;
}